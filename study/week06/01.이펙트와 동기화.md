#ì´í™íŠ¸ì™€ ë™ê¸°í™”

## useEffectê°€ ì´ë²¤íŠ¸ì™€ ë‹¤ë¥¸ ì 

ë Œë”ë§ ì½”ë“œëŠ” ìˆœìˆ˜í•˜ê²Œ ë Œë”ë§Œ í• ë¿ ë‹¤ë¥¸ ì‘ì—…ì€ ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ.

ì´ë²¤íŠ¸ ì²˜ë¦¬ë¡œë§Œ ì¶©ë¶„í•˜ì§€ ì•ŠìŒ.

=> ueseffect ë¥¼ ì‚¬ìš©í•˜ë©´ ë Œë”ë§ ìì²´ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ë¶€ì‘ìš©ì„ ì§€ì •í•  ìˆ˜ ìˆìŒ.

ë°˜ë“œì‹œ effect ê°€ í•„ìš”í•œê²ƒì€ ì•„ë‹˜.

## effect ì‘ì„± ë°©ë²•

1. ì„ ì–¸

```jsx
import { useEffect } from "react";
```

ì½”ë“œ ì¶”ê°€

```jsx
const Test = () => {
  useEffect(() => {

  })
  return ()
}
```

ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë ë•Œë§ˆë‹¤ í™”ë©´ì„ ì—…ë°ì´íŠ¸ í•œ ë‹¤ìŒ ë‚´ë¶€ ì½”ë“œë¥¼ ì‹¤í–‰.

```jsx
function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  if (isPlaying) {
    ref.current.play(); // Calling these while rendering isn't allowed.
  } else {
    ref.current.pause(); // Also, this crashes.
  }

  return <video ref={ref} src={src} loop playsInline />;
}
```

ì´ë ‡ê²Œ í•˜ë©´ refë¥¼ ëª»ì°¾ëŠ”ë‹¤.
effect ë¡œ ê°ì‹¸ì¤˜ì•¼ í•œë‹¤. (ë¨¼ì € í™”ë©´ì„ ì—…ë°ì´íŠ¸ í•˜ë„ë¡)

2. ì¢…ì†ì„± ì§€ì •
   ë§¤ë²ˆ ì‹¤í–‰ì„ ë§‰ê¸° ìœ„í•´ì„  ì¢…ì†ì„±ì„ ì§€ì •í•´ì„œ ë³€í™”ì— ëŒ€í•´ ê°ì§€í•œë‹¤.

```jsx
useEffect(() => {
  if (isPlaying) {
    ref.current.play();
  } else {
    ref.current.pause();
  }
}, [isPlaying]);
```

3. í•„ìš”í•œ ê²½ìš° ì •ë¦¬
   ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ê°ˆë•Œ ë§ˆìš´íŠ¸ê°€ í•´ì œë ë˜ê³ , ë‹¤ì‹œ ëŒì•„ì˜¬ë•Œ ë§ˆìš´íŠ¸ ë ë•Œ í•´ì œë˜ëŠ”ê²ƒì´ íŒŒê´´ì „ë˜ì§€ ì•Šê³  ê³„ì† ìŒ“ì—¬ì„œ return ì²˜ë¦¬ë¥¼ í•´ì¤€ë‹¤.

```jsx
useEffect(() => {
  const connection = createConnection();
  connection.connect();
  return () => {
    connection.disconnect();
  };
}, []);
```

## Remounting í›„ ì‘ë™í•˜ë„ë¡ ë‚´ Effectë¥¼ ìˆ˜ì •í•˜ëŠ” ë°©ë²•

### ë¹„ React ìœ„ì ¯ ì œì–´

```jsx
useEffect(() => {
  const map = mapRef.current;
  map.setZoomLevel(zoomLevel);
}, [zoomLevel]);
```

react ì˜ usestateë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì •ë¦¬ê°€ í•„ìš”í•˜ì§€ ì•ŠëŠ”ë‹¤.

```jsx
useEffect(() => {
  const dialog = dialogRef.current;
  dialog.showModal();
  return () => dialog.close();
}, []);
```

dialogì˜ ë‚´ì¥ëœ showModalì€ ë‘ë²ˆ í˜¸ì¤„ëœë‹¤.

### ì´ë²¤íŠ¸ êµ¬ë…

```jsx
useEffect(() => {
  function handleScroll(e) {
    console.log(window.scrollX, window.scrollY);
  }
  window.addEventListener("scroll", handleScroll);
  return () => window.removeEventListener("scroll", handleScroll);
}, []);
```

addEventListenerí˜¸ì¶œ í•œ ë‹¤ìŒ removeEventListenerë¥¼ ì§€ìš°ëŠ”ë°
í•œë²ˆì— í•˜ë‚˜ì˜ í™œì„±êµ¬ë…ë§Œ ìˆê²Œëœë‹¤.

### íŠ¸ë¦¬ê±° ì• ë‹ˆë©”ì´ì…˜

```jsx
useEffect(() => {
  const node = ref.current;
  node.style.opacity = 1; // Trigger the animation
  return () => {
    node.style.opacity = 0; // Reset to the initial value
  };
}, []);
```

ë¬´ì–¸ê°€ë¥¼ ì• ë‹ˆë©”ì´ì…˜í™” í•˜ëŠ” ê²½ìš° ì´ˆê¸°ê°’ìœ¼ë¡œ ì¬ì„¤ì •í•´ì•¼í•œë‹¤.
=> ì´ëŸ°ê²½ìš°ëŠ” ì˜ì—†ìŒ.

### ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ì¤‘?

```jsx
useEffect(() => {
  let ignore = false;

  async function startFetching() {
    const json = await fetchTodos(userId);
    if (!ignore) {
      setTodos(json);
    }
  }

  startFetching();

  return () => {
    ignore = true;
  };
}, [userId]);
```

cleanupì€ ë” ì´ìƒ ê´€ë ¨ì´ ì—†ëŠ” ê°€ì ¸ì˜¤ê¸°ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê³„ì† ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤. => ë¬´ìŠ¨ë§ì¼ê¹Œ..í•œë²ˆë§Œ ì €ì¥í•˜ê²Œ?

## ì•± ì´ˆê¸°í™”ë¥¼ ìœ„í•´ì„  useEffect ë¥¼ ì•ˆì¨ë„ëœë‹¤.

```jsx
if (typeof window !== "undefined") {
  // Check if we're running in the browser.
  checkAuthToken();
  loadDataFromLocalStorage();
}

function App() {
  // ...
}
```

## ì œí’ˆ êµ¬ë§¤ì—ì„œëŠ” uesEffect ë¥¼ ì“°ì§€ ì•ŠëŠ”ë‹¤.

```jsx
useEffect(() => {
  // ğŸ”´ Wrong: This Effect fires twice in development, exposing a problem in the code.
  fetch("/api/buy", { method: "POST" });
}, []);
```

ì´ë ‡ê²Œ ì‚¬ìš©í•˜ë©´ ë‹¤ì‹œ ì˜¬ë•Œ êµ¬ë§¤ê°€ ëœë‹¤.

êµ¬ë§¤ëŠ” eventì—¬ì•¼ í•´ì„œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¡œ ë§Œë“ ë‹¤.

## ì´ì§‘í•©

```jsx
function Playground() {
  const [text, setText] = useState("a");

  useEffect(() => {
    function onTimeout() {
      console.log("â° " + text);
    }

    console.log('ğŸ”µ Schedule "' + text + '" log');
    const timeoutId = setTimeout(onTimeout, 3000);

    return () => {
      console.log('ğŸŸ¡ Cancel "' + text + '" log'); 
      // ì´ì „ê²ƒë“¤ ì •ë¦¬í•œë’¤ 3ì´ˆë’¤ ì‹¤í–‰. 
      clearTimeout(timeoutId);
    };
  }, [text]);

  return (
    <>
      <label>
        What to log:{" "}
        <input value={text} onChange={(e) => setText(e.target.value)} />
      </label>
      <h1>{text}</h1>
    </>
  );
}
```
=> ë””ë°”ìš´ìŠ¤? 

ê³¼ì œ1 
https://codesandbox.io/s/sleepy-flower-0k0gk0?file=/MyInput.js

ê³¼ì œ2
ref ì•ˆì“´ ë²„ì „
https://codesandbox.io/s/objective-swanson-ddeb70?file=/MyInput.js

ê³¼ì œ3
ë¦¬í„´ìœ¼ë¡œ ì •ë¦¬
https://codesandbox.io/s/loving-robinson-0hn27r?file=/Counter.js

ê³¼ì œ4
ë¦¬í„´ìš© ë³€ìˆ˜ ì„ ì–¸
https://codesandbox.io/s/small-snowflake-z145fl?file=/App.js
